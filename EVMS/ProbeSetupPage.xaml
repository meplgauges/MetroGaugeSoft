<UserControl x:Class="EVMS.ProbeSetupPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:EVMS"
             Background="White">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Style/Design.xaml"/>
                <ResourceDictionary Source="Style/ControlStyles.xaml"/>

            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
        
        
    </UserControl.Resources>
   

    <Grid Margin="6">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Row 0: Select Part -->
            <RowDefinition Height="4*"/>
            <!-- Row 1: Progress Bars -->
            <!-- Row 2: New small row -->
            <RowDefinition Height="1*"/>
            <!-- Row 3: Info + Buttons -->
        </Grid.RowDefinitions>
        <!-- Row 1: Progress Bars -->
        <Border Grid.Row="1" Style="{StaticResource SectionBorder}" Background="{StaticResource PageBackgroundBrush}">

            <ItemsControl ItemsSource="{Binding Probes}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal"
                           ItemWidth="235"
                           ItemHeight="370" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <local:ProbeSetupProgressBar 
                    Value="{Binding Value}" 
                    Title="{Binding Title}" 
                    ID="{Binding ID}" 

                    Status="{Binding Status}"   
                    Margin="8"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

        </Border>


        <!-- Row 2: Two bordered columns—info and buttons -->
        <Grid Grid.Row="3" Margin="0,5,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="4*"/>

                <ColumnDefinition Width="0.5*"/>
                <ColumnDefinition Width="0.3*"/>


            </Grid.ColumnDefinitions>

            <!-- Info border -->
            <Border Grid.Column="1" Style="{StaticResource SectionBorder}" >

                <UniformGrid Name="ToggleGrid1" Margin="0,0,0,0" Columns="1" 
                    HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Border>
            <Border Grid.Column="2" Style="{StaticResource SectionBorder}">
                <ToggleButton x:Name="ReadingToggleButton"
                  Width="70" Height="70"
                  HorizontalAlignment="Center"
                  Margin="10"
                  Checked="ReadingToggle_Checked"
                  Unchecked="ReadingToggle_Unchecked">
                    <ToggleButton.Template>
                        <ControlTemplate TargetType="ToggleButton">
                            <Border x:Name="ButtonBorder"
                        Background="#4CAF50"
                        CornerRadius="35"
                        Padding="5">
                                <Grid>
                                    <!-- Logo/Icon (20x20) -->
                                    <Image x:Name="LogoImage"
                               Source="/Images/logo.png"  
                                        Width="20" Height="20"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Center"
                               Margin="8,0,0,0"/>

                                        <!-- Text -->
                                        <TextBlock x:Name="ButtonText"
                                   Text="START"
                                   FontSize="14"
                                   FontWeight="Bold"
                                   Foreground="White"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"/>
                                </Grid>
                            </Border>

                            <ControlTemplate.Triggers>
                                <!-- STOP State - RED -->
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="ButtonBorder" Property="Background" Value="#F44336"/>
                                    <Setter TargetName="ButtonText" Property="Text" Value="STOP"/>
                                </Trigger>

                                <!-- Hover Effects -->
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="ButtonBorder" Property="Background" Value="#66BB6A"/>
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsChecked" Value="True"/>
                                        <Condition Property="IsMouseOver" Value="True"/>
                                    </MultiTrigger.Conditions>
                                    <Setter TargetName="ButtonBorder" Property="Background" Value="#E53935"/>
                                </MultiTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </ToggleButton.Template>
                </ToggleButton>
            </Border>




            <!-- Buttons border -->
            <Border Grid.Column="0" Style="{StaticResource SectionBorder}" >

                <UniformGrid Name="ToggleGrid" Margin="0,10,0,0" Columns="3 " 
                HorizontalAlignment="Left" VerticalAlignment="Top"/>

            </Border>

        </Grid>
    </Grid>
</UserControl>
